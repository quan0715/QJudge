FROM node:20-alpine

WORKDIR /app

COPY package.json package-lock.json ./

# Delete package-lock.json and reinstall to get platform-specific binaries
# This is needed because package-lock.json may be generated on a different platform (e.g., macOS)
# and won't include Linux ARM64 musl binaries required by Alpine
RUN rm -f package-lock.json && npm install

COPY . .

EXPOSE 5173

CMD ["npm", "run", "dev", "--", "--host"]
