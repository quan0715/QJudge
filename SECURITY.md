# å®‰å…¨æ”¿ç­–

## æ”¯æ´ç‰ˆæœ¬

ç›®å‰æˆ‘å€‘ç‚ºä»¥ä¸‹ç‰ˆæœ¬æä¾›å®‰å…¨æ›´æ–°ï¼š

| ç‰ˆæœ¬  | æ”¯æ´ç‹€æ…‹  |
| ----- | --------- |
| 1.x   | âœ… æ”¯æ´ä¸­ |
| < 1.0 | âŒ ä¸æ”¯æ´ |

---

## å›å ±æ¼æ´

æˆ‘å€‘éå¸¸é‡è¦– QJudge çš„å®‰å…¨æ€§ã€‚å¦‚æœæ‚¨ç™¼ç¾å®‰å…¨æ¼æ´ï¼Œè«‹**ä¸è¦**å…¬é–‹å›å ±ï¼Œè€Œæ˜¯éµå¾ªä»¥ä¸‹æ­¥é©Ÿï¼š

### å›å ±æµç¨‹

1. **Email é€šå ±**

   - ç™¼é€éƒµä»¶è‡³å°ˆæ¡ˆç¶­è­·è€…
   - ä¸»æ—¨æ ¼å¼ï¼š`[SECURITY] ç°¡çŸ­æè¿°`

2. **æä¾›è©³ç´°è³‡è¨Š**
   è«‹åœ¨å ±å‘Šä¸­åŒ…å«ä»¥ä¸‹è³‡è¨Šï¼š

   - æ¼æ´é¡å‹ï¼ˆä¾‹å¦‚ï¼šXSSã€SQL Injectionã€èªè­‰ç¹éç­‰ï¼‰
   - å—å½±éŸ¿çš„å…ƒä»¶/æª”æ¡ˆ/ç«¯é»
   - é‡ç¾æ­¥é©Ÿ
   - æ½›åœ¨å½±éŸ¿ç¯„åœ
   - å¯èƒ½çš„ä¿®å¾©å»ºè­°ï¼ˆå¦‚æœæœ‰ï¼‰

3. **ç­‰å¾…å›æ‡‰**
   - æˆ‘å€‘æœƒåœ¨ **48 å°æ™‚å…§**ç¢ºèªæ”¶åˆ°æ‚¨çš„å ±å‘Š
   - æˆ‘å€‘æœƒåœ¨ **7 å€‹å·¥ä½œæ—¥å…§**é€²è¡Œåˆæ­¥è©•ä¼°
   - æ ¹æ“šåš´é‡ç¨‹åº¦ï¼Œæˆ‘å€‘æœƒåˆ¶å®šä¿®å¾©è¨ˆç•«

### æ¼æ´åš´é‡ç¨‹åº¦åˆ†é¡

| ç­‰ç´š         | èªªæ˜                               | ç¯„ä¾‹                    |
| ------------ | ---------------------------------- | ----------------------- |
| **Critical** | å¯å°è‡´ç³»çµ±å®Œå…¨è¢«æ§åˆ¶æˆ–å¤§é‡è³‡æ–™æ´©éœ² | RCEã€èªè­‰ç¹éã€SQL æ³¨å…¥ |
| **High**     | åš´é‡å½±éŸ¿ç³»çµ±å®‰å…¨æˆ–ä½¿ç”¨è€…è³‡æ–™       | XSSã€æ•æ„Ÿè³‡æ–™æ´©éœ²       |
| **Medium**   | ä¸­åº¦å½±éŸ¿ï¼Œéœ€è¦ç‰¹å®šæ¢ä»¶è§¸ç™¼         | CSRFã€è³‡è¨Šæ´©éœ²          |
| **Low**      | ä½åº¦å½±éŸ¿ï¼Œé›£ä»¥åˆ©ç”¨                 | è¼•å¾®è³‡è¨Šæ´©éœ²ã€è¨­å®šå•é¡Œ  |

---

## å®‰å…¨è¨­è¨ˆ

### èªè­‰èˆ‡æˆæ¬Š

- **JWT èªè­‰**ï¼šä½¿ç”¨ `rest_framework_simplejwt` å¯¦ä½œ
- **Token é»‘åå–®**ï¼šç™»å‡ºæ™‚è‡ªå‹•å°‡ Token åŠ å…¥é»‘åå–®
- **é€Ÿç‡é™åˆ¶**ï¼šç™»å…¥/è¨»å†Š API å¯¦ä½œé€Ÿç‡é™åˆ¶ï¼Œé˜²æ­¢æš´åŠ›ç ´è§£
- **RBAC**ï¼šåŸºæ–¼è§’è‰²çš„å­˜å–æ§åˆ¶ï¼ˆAdmin/Teacher/Studentï¼‰

### ç¨‹å¼ç¢¼åŸ·è¡Œå®‰å…¨ï¼ˆJudge Engineï¼‰

- **Docker éš”é›¢**ï¼šæ‰€æœ‰ä½¿ç”¨è€…ç¨‹å¼ç¢¼åœ¨ç¨ç«‹ Docker å®¹å™¨ä¸­åŸ·è¡Œ
- **ç¶²è·¯ç¦ç”¨**ï¼š`network_disabled=True` é˜²æ­¢ç¶²è·¯å­˜å–
- **è³‡æºé™åˆ¶**ï¼š
  - CPU æ™‚é–“é™åˆ¶
  - è¨˜æ†¶é«”é™åˆ¶
  - PID é™åˆ¶ï¼ˆé˜²æ­¢ Fork Bombï¼‰
- **Seccomp Profile**ï¼šé™åˆ¶ç³»çµ±å‘¼å«
- **ç„¡ç‰¹æ¬ŠåŸ·è¡Œ**ï¼šç§»é™¤æ‰€æœ‰ Linux Capabilities

### Web å®‰å…¨

- **HTTPS**ï¼šç”Ÿç”¢ç’°å¢ƒå¼·åˆ¶ä½¿ç”¨ HTTPS
- **CORS**ï¼šåš´æ ¼çš„è·¨åŸŸè³‡æºå…±äº«è¨­å®š
- **CSRF ä¿è­·**ï¼šDjango CSRF ä¸­ä»‹å±¤
- **XSS é˜²è­·**ï¼šDjango é è¨­è‡ªå‹•è·³è„«
- **SQL æ³¨å…¥é˜²è­·**ï¼šä½¿ç”¨ Django ORM
- **å®‰å…¨ Headers**ï¼šç”Ÿç”¢ç’°å¢ƒè¨­å®šå®‰å…¨ç›¸é—œ HTTP Headers

### è³‡æ–™å®‰å…¨

- **å¯†ç¢¼åŠ å¯†**ï¼šbcrypt æ¼”ç®—æ³•
- **æ•æ„Ÿè³‡æ–™**ï¼šç’°å¢ƒè®Šæ•¸ç®¡ç†ï¼ˆä¸å­˜å…¥ç¨‹å¼ç¢¼ï¼‰
- **è³‡æ–™åº« SSL**ï¼šé›²ç«¯è³‡æ–™åº«é€£ç·šä½¿ç”¨ SSL

### è€ƒè©¦æ¨¡å¼å®‰å…¨

- **å‰ç«¯ç›£æ§**ï¼šè¦–çª—å¤±ç„¦ã€Tab åˆ‡æ›ã€å…¨è¢å¹•é€€å‡ºåµæ¸¬
- **å¾Œç«¯å¿ƒè·³**ï¼šå®šæœŸå¿ƒè·³æª¢æŸ¥é€£ç·šç‹€æ…‹
- **é•è¦è¨˜éŒ„**ï¼šExamEvent è¡¨è¨˜éŒ„æ‰€æœ‰ç•°å¸¸äº‹ä»¶
- **è‡ªå‹•é–å®š**ï¼šè¶…éè­¦å‘Šæ¬¡æ•¸è‡ªå‹•é–å®š

---

## å·²çŸ¥å®‰å…¨æªæ–½

### å·²å¯¦ä½œ

- âœ… JWT Token é»‘åå–®
- âœ… API é€Ÿç‡é™åˆ¶
- âœ… Docker æ²™ç®±éš”é›¢
- âœ… Seccomp ç³»çµ±å‘¼å«éæ¿¾
- âœ… RBAC è§’è‰²ç®¡ç†
- âœ… è€ƒè©¦å¿ƒè·³ç›£æ§
- âœ… HTTPSï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰

### å»ºè­°é¡å¤–æªæ–½

- ğŸ”² Web Application Firewall (WAF)
- ğŸ”² DDoS é˜²è­·
- ğŸ”² Intrusion Detection System (IDS)
- ğŸ”² Security Audit Log ä¸­å¿ƒåŒ–
- ğŸ”² Penetration Testing

---

## å®‰å…¨æ›´æ–°

ç•¶ç™¼å¸ƒå®‰å…¨æ›´æ–°æ™‚ï¼Œæˆ‘å€‘æœƒï¼š

1. **ç™¼å¸ƒå®‰å…¨å…¬å‘Š**

   - åœ¨ GitHub Releases ä¸­æ¨™è¨˜
   - æ›´æ–° CHANGELOG.md

2. **é€šçŸ¥æ–¹å¼**

   - GitHub Security Advisories
   - éƒµä»¶é€šçŸ¥ï¼ˆé‡å°é‡å¤§æ¼æ´ï¼‰

3. **æ›´æ–°å»ºè­°**
   - Critical/Highï¼šç«‹å³æ›´æ–°
   - Mediumï¼šåœ¨ä¸‹æ¬¡ç¶­è­·é€±æœŸæ›´æ–°
   - Lowï¼šä¾ç…§æ­£å¸¸æ›´æ–°æµç¨‹

---

## æœ€ä½³å¯¦å‹™å»ºè­°

å¦‚æœæ‚¨è¦éƒ¨ç½² QJudgeï¼Œè«‹éµå¾ªä»¥ä¸‹å®‰å…¨å»ºè­°ï¼š

### ç’°å¢ƒè¨­å®š

```bash
# .env è¨­å®šç¯„ä¾‹
SECRET_KEY=<ä½¿ç”¨å¼·éš¨æ©Ÿå­—ä¸²>
DEBUG=False
ALLOWED_HOSTS=your-domain.com

# è³‡æ–™åº«ï¼ˆä½¿ç”¨å¼·å¯†ç¢¼ï¼‰
DB_PASSWORD=<å¼·å¯†ç¢¼>

# Redisï¼ˆè¨­å®šå¯†ç¢¼ï¼‰
REDIS_URL=redis://:password@localhost:6379/0
```

### Nginx è¨­å®š

```nginx
# å®‰å…¨ Headers
add_header X-Frame-Options "SAMEORIGIN" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "strict-origin-when-cross-origin" always;

# HTTPS é‡å®šå‘
server {
    listen 80;
    return 301 https://$host$request_uri;
}
```

### å®šæœŸæª¢æŸ¥

- [ ] å®šæœŸæ›´æ–°ä¾è³´å¥—ä»¶
- [ ] æª¢æŸ¥ GitHub Security Alerts
- [ ] æª¢è¦– Access Logs
- [ ] å¯©æŸ¥ä½¿ç”¨è€…æ¬Šé™
- [ ] å‚™ä»½é©—è­‰

---

## è¯çµ¡è³‡è¨Š

- **å®‰å…¨å•é¡Œ**ï¼šç™¼é€éƒµä»¶è‡³å°ˆæ¡ˆç¶­è­·è€…
- **ä¸€èˆ¬å•é¡Œ**ï¼šGitHub Issues

æ„Ÿè¬æ‚¨å¹«åŠ©æˆ‘å€‘ä¿æŒ QJudge çš„å®‰å…¨ï¼ğŸ”’
