# QJudge 教師題目管理指南

本指南提供教師使用 QJudge 平台創建和管理程式題目的完整說明，包括題目創建、測試資料設計、批量導入等操作。

---

## 📋 目錄

- [快速開始](#快速開始)
- [創建題目](#創建題目)
- [測試資料管理](#測試資料管理)
- [批量導入題目](#批量導入題目)
- [題目編輯與維護](#題目編輯與維護)
- [題目品質檢查](#題目品質檢查)
- [常見問題](#常見問題)

---

## 🚀 快速開始

### 題目類型

QJudge 支援多種類型的程式題目：

- **基礎題目**: 簡單的輸入輸出題目
- **演算法題目**: 需要特定演算法解決
- **資料結構題目**: 考察資料結構應用
- **數學題目**: 需要數學推導
- **特殊評測**: 自訂評測程式（如 Special Judge）

### 存取題目管理

1. 登入 QJudge 平台
2. 點擊導覽列的「題目管理」
3. 進入題目管理頁面

---

## 📝 創建題目

### 方式一：使用網頁介面創建

#### 步驟 1: 基本資訊

**題目標題**：
- 簡潔明確，反映題目主題
- 中文標題（必填）
- 英文標題（可選）

範例：
```
中文: A + B Problem
英文: Sum of Two Numbers
```

**題目編號**：
- 系統自動生成或手動指定
- 格式：P001, P002, ...
- 方便管理和引用

**難度等級**：
- 🟢 **簡單 (Easy)**: 基礎題目，新手可解
- 🟡 **中等 (Medium)**: 需要一定基礎
- 🔴 **困難 (Hard)**: 需要深入理解

**標籤/類別**：
選擇相關標籤幫助學生搜尋：
- 資料結構：陣列、鏈結串列、樹、圖
- 演算法：排序、搜尋、動態規劃、貪婪
- 數學：數論、組合、幾何
- 其他：模擬、字串處理

#### 步驟 2: 題目描述

使用 Markdown 格式撰寫，包含：

**題目背景**：
```markdown
## 題目描述

給定兩個整數 A 和 B，請計算它們的和。
```

**輸入格式**：
```markdown
## 輸入格式

一行包含兩個整數 A 和 B，以空格分隔。

**限制條件**
- -10^9 ≤ A, B ≤ 10^9
```

**輸出格式**：
```markdown
## 輸出格式

輸出一個整數，代表 A + B 的和。
```

**範例說明**：
```markdown
## 範例測試

### 範例 1

**輸入**：
```
1 2
```

**輸出**：
```
3
```

**說明**：1 + 2 = 3

### 範例 2

**輸入**：
```
-5 10
```

**輸出**：
```
5
```

**說明**：-5 + 10 = 5
```

**提示**（可選）：
```markdown
## 提示

這是一道基礎題目，只需要：
1. 讀取兩個整數
2. 相加並輸出結果

注意整數範圍可能超過 32 位元，建議使用 64 位元整數。
```

#### 步驟 3: 資源限制

**時間限制**：
- 單位：毫秒 (ms)
- 建議值：1000ms (1秒) 到 5000ms (5秒)
- 考慮不同語言的效能差異

**記憶體限制**：
- 單位：MB
- 建議值：256MB 到 512MB
- 根據題目需求調整

**輸出大小限制**：
- 防止惡意輸出大量資料
- 建議值：64MB

範例設定：
```
時間限制: 1000 ms (1 秒)
記憶體限制: 256 MB
輸出大小: 64 MB
```

#### 步驟 4: 語言設定

為不同程式語言提供模板：

**C++ 模板**：
```cpp
#include <iostream>
using namespace std;

int main() {
    long long a, b;
    cin >> a >> b;
    cout << a + b << endl;
    return 0;
}
```

**Python 模板**：
```python
a, b = map(int, input().split())
print(a + b)
```

**Java 模板**：
```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        long a = sc.nextLong();
        long b = sc.nextLong();
        System.out.println(a + b);
    }
}
```

---

## 🧪 測試資料管理

### 測試資料設計原則

#### 1. 範例測試（Sample Test Cases）

**目的**：幫助學生理解題目

**特性**：
- 對學生可見
- 通常 2-3 個
- 覆蓋基本情況
- 包含詳細說明

**範例**：
```
測試點 #1 (範例)
輸入: 1 2
輸出: 3
分數: 0 (不計分)
```

#### 2. 隱藏測試（Hidden Test Cases）

**目的**：完整評測學生程式

**設計要點**：
- 覆蓋所有情況
- 包含邊界條件
- 包含極端情況
- 適當分配分數

**測試類型**：

**基本測試**（30-40%）：
```
- 小規模數據
- 簡單情況
- 確保基本邏輯正確
```

**邊界測試**（20-30%）：
```
- 最小值測試
- 最大值測試
- 零值測試
- 邊界條件
```

**隨機測試**（20-30%）：
```
- 隨機生成的測試資料
- 覆蓋一般情況
```

**特殊測試**（10-20%）：
```
- 特殊情況
- 極端情況
- 容易出錯的情況
```

### 新增測試資料

#### 方式 1: 手動輸入

1. 點擊「新增測試點」
2. 填寫測試資料：

```
測試點名稱: 測試點 #1
輸入資料:
1 2

輸出資料:
3

是否為範例: ✅
分數: 0
順序: 1
```

#### 方式 2: 上傳檔案

1. 準備輸入輸出檔案：
   - `input1.txt` 和 `output1.txt`
   - `input2.txt` 和 `output2.txt`
   - ...

2. 批量上傳：
   - 選擇所有檔案
   - 系統自動配對
   - 設定分數和順序

#### 方式 3: 使用產生器

對於需要大量測試資料的題目，可以撰寫產生器：

**輸入產生器** (Python 範例)：
```python
import random

def generate_test(n):
    """生成 n 組測試資料"""
    for i in range(n):
        a = random.randint(-10**9, 10**9)
        b = random.randint(-10**9, 10**9)
        print(f"{a} {b}")

# 生成 10 組測試
generate_test(10)
```

**標準答案程式**：
```python
# solution.py
a, b = map(int, input().split())
print(a + b)
```

**自動生成測試資料**：
```bash
# 產生輸入
python generator.py > input.txt

# 產生輸出
python solution.py < input.txt > output.txt
```

### 測試資料檢查

創建測試資料後，請檢查：

✅ **完整性檢查**：
- 每個測試點都有對應的輸入和輸出
- 範例測試至少 2 個
- 隱藏測試覆蓋所有情況

✅ **正確性檢查**：
- 輸出符合題目要求
- 格式正確（空格、換行）
- 無多餘字元

✅ **難度檢查**：
- 測試資料由易到難
- 分數分配合理
- 邊界情況已包含

---

## 📦 批量導入題目

### 使用 YAML 格式導入

QJudge 支援使用 YAML 格式批量導入題目，詳細格式請參考 [題目導入格式文件](./problem-import-format.md)。

**基本結構**：
```yaml
# problem.yaml
title: "A + B Problem"
difficulty: easy           # easy | medium | hard
time_limit: 1000           # 毫秒 (100-10000)
memory_limit: 256          # MB (16-512)
is_visible: true           # 是否公開

# 程式碼限制 (可選)
forbidden_keywords:        # 禁止使用的關鍵字
  - "system"
  - "exec"
required_keywords:         # 必須包含的關鍵字
  - "for"

# 題目翻譯
translations:
  - language: "zh-TW"
    title: "A + B 問題"
    description: |
      給定兩個整數 A 和 B，計算 A + B 的值。
    input_description: |
      一行包含兩個整數 A 和 B，以空格分隔。
    output_description: |
      一個整數，代表 A + B 的和。
    hint: ""

# 測試案例
test_cases:
  # 範例測試 (公開給學生看)
  - input_data: "1 2"
    output_data: "3"
    is_sample: true        # 是否為範例
    is_hidden: false       # 是否隱藏
    score: 0               # 分數 (範例通常不計分)
    
  # 隱藏測試 (不公開，計分)
  - input_data: "100 200"
    output_data: "300"
    is_sample: false
    is_hidden: true
    score: 50
    
  - input_data: "-999999999 999999999"
    output_data: "0"
    is_sample: false
    is_hidden: true
    score: 50

# 語言設定
language_configs:
  - language: "cpp"
    template_code: |
      #include <iostream>
      using namespace std;
      
      int main() {
          long long a, b;
          cin >> a >> b;
          cout << a + b << endl;
          return 0;
      }
    is_enabled: true
    
  - language: "python"
    template_code: |
      a, b = map(int, input().split())
      print(a + b)
    is_enabled: true
```

#### 匯入題目

1. 在題目管理頁面，點擊「批量導入」
2. 選擇 YAML 檔案
3. 預覽題目內容
4. 確認無誤後點擊「導入」

#### 批量匯入多題

可以準備多個 YAML 檔案，一次匯入：

```
problems/
  ├── P001_sum.yaml
  ├── P002_gcd.yaml
  ├── P003_sort.yaml
  └── ...
```

系統會依序處理每個檔案。

### 從其他 OJ 系統匯入

#### 支援的格式

- **Codeforces 格式**: Polygon 匯出的套件
- **AtCoder 格式**: 標準測試資料格式
- **ZeroJudge 格式**: 台灣常用格式

#### 轉換工具

使用轉換腳本將其他格式轉為 QJudge YAML：

```bash
# 轉換 Codeforces Polygon 套件
python convert_polygon.py problem.zip -o problem.yaml

# 轉換測試資料資料夾
python convert_testdata.py testdata/ -o problem.yaml
```

---

## ✏️ 題目編輯與維護

### 編輯現有題目

1. 在題目列表中找到要編輯的題目
2. 點擊「編輯」按鈕
3. 修改任何欄位
4. 儲存變更

### 版本控制

**題目版本記錄**：
- 系統自動記錄每次修改
- 可以查看歷史版本
- 可以回復到先前版本

**變更記錄範例**：
```
版本 3 (2025-12-03 15:30) - 修改測試資料
版本 2 (2025-12-01 10:00) - 更新題目描述
版本 1 (2025-11-28 14:00) - 初始版本
```

### 題目可見性

**公開設定**：
- **公開**: 所有人都可見
- **私有**: 只有教師和指定學生可見
- **競賽專用**: 只在特定競賽中可見

**練習模式**：
- 允許學生在練習模式中解題
- 不影響競賽使用

### 題目複製

快速創建相似題目：

1. 選擇要複製的題目
2. 點擊「複製」
3. 系統創建副本
4. 修改需要調整的部分

適用情境：
- 創建不同難度版本
- 創建不同資料範圍版本
- 創建練習題和考試題

### 題目歸檔

不再使用的題目可以歸檔：

1. 選擇題目
2. 點擊「歸檔」
3. 題目移至歸檔區
4. 不會出現在題目列表
5. 可以隨時還原

---

## 🔍 題目品質檢查

### 自動檢查

系統提供自動檢查功能：

#### 基本檢查
- ✅ 題目描述完整
- ✅ 輸入輸出格式說明清楚
- ✅ 至少有 2 個範例測試
- ✅ 至少有 5 個隱藏測試
- ✅ 測試資料總分為 100

#### 進階檢查
- ✅ 時間限制合理（標準解能通過）
- ✅ 記憶體限制合理
- ✅ 測試資料覆蓋邊界情況
- ✅ 範例測試與題目描述一致

### 標準解驗證

**提交標準解**：
1. 撰寫正確的解答程式
2. 在題目編輯頁面提交
3. 確認通過所有測試
4. 記錄執行時間作為參考

**多語言驗證**：
- 為每種支援的語言提供標準解
- 確認所有語言都能通過
- 調整時間限制以適應不同語言

### 錯誤解驗證

**常見錯誤測試**：
1. 撰寫典型錯誤解法
2. 確認會在特定測試點失敗
3. 驗證錯誤訊息正確

範例：
```cpp
// 錯誤解 1: 未考慮溢位
int main() {
    int a, b;  // 應使用 long long
    cin >> a >> b;
    cout << a + b << endl;
    return 0;
}
// 應在大數測試點失敗
```

### 同儕審查

請其他教師協助審查：

**審查重點**：
- 題目描述是否清楚
- 難度評估是否準確
- 測試資料是否完整
- 有無歧義或錯誤

---

## 💡 題目設計技巧

### 難度梯度設計

**簡單題（Easy）**：
- 直接實作，不需特殊技巧
- 時間複雜度要求寬鬆
- 適合新手練習

範例：基本運算、陣列操作、簡單字串處理

**中等題（Medium）**：
- 需要基本演算法知識
- 需要思考解法
- 實作有一定複雜度

範例：排序應用、簡單DP、基礎圖論

**困難題（Hard）**：
- 需要進階演算法
- 需要優化技巧
- 實作難度高

範例：複雜DP、進階圖論、數學推導

### 測試資料設計技巧

**邊界測試**：
```
- 最小值: 0, 1, -1
- 最大值: 10^9, 2^31-1
- 空輸入: 空陣列、空字串
- 單一元素
```

**特殊情況**：
```
- 所有元素相同
- 已排序/逆序
- 全正/全負/混合
- 質數/合數
```

**隨機測試**：
```python
import random

def generate_random_test(n):
    """生成隨機測試"""
    data = [random.randint(1, 1000) for _ in range(n)]
    return data
```

### 題目描述技巧

**清晰的格式**：
```markdown
## 題目描述
[簡短的問題陳述]

## 輸入格式
[詳細的輸入說明]
- 第一行：...
- 第二行：...

## 輸出格式
[詳細的輸出說明]

## 範例
[至少 2 個範例，包含解釋]

## 限制條件
- 1 ≤ n ≤ 10^5
- 1 ≤ a[i] ≤ 10^9

## 提示
[可選的解題提示]
```

**避免歧義**：
- 使用明確的術語
- 避免口語化表達
- 提供充足的範例
- 說明邊界情況的處理

---

## ❓ 常見問題

### 題目創建相關

**Q: 如何決定題目的難度等級？**  
A: 考慮所需的演算法知識、實作複雜度、思考難度。可以參考通過率調整。

**Q: 時間限制該如何設定？**  
A: 執行標準解，取其執行時間的 2-3 倍作為時間限制。考慮不同語言的效能差異。

**Q: 需要支援所有程式語言嗎？**  
A: 至少支援 C++ 和 Python。如果題目對語言有特殊要求，可以限制語言。

### 測試資料相關

**Q: 需要多少個測試點？**  
A: 建議至少 10 個隱藏測試點，加上 2-3 個範例測試點。複雜題目可能需要更多。

**Q: 如何確保測試資料覆蓋所有情況？**  
A: 系統性地設計測試：基本測試、邊界測試、隨機測試、特殊情況。

**Q: 範例測試需要計分嗎？**  
A: 通常不計分。範例測試的目的是幫助理解題目，不應影響評分。

### 批量導入相關

**Q: YAML 格式有什麼好處？**  
A: 易讀、易寫、易於版本控制、方便批量處理。

**Q: 可以匯入圖片嗎？**  
A: 可以。在 Markdown 中使用 `![](image_url)` 語法，或上傳圖片到系統。

**Q: 如何驗證 YAML 格式正確？**  
A: 使用線上 YAML 驗證器，或系統的預覽功能。

### 題目維護相關

**Q: 修改題目會影響已有的提交嗎？**  
A: 不會。已有的提交記錄會保留。但如果修改測試資料，建議重新評測相關提交。

**Q: 可以刪除題目嗎？**  
A: 可以，但建議先歸檔。刪除後相關的提交記錄也會被刪除。

**Q: 如何處理學生回報的題目問題？**  
A: 認真檢查，如確有問題立即修正並公告。重新評測相關提交。

---

## 📚 相關文件

- [題目導入格式](./problem-import-format.md) - YAML 格式詳細說明
- [競賽管理指南](./TEACHER_CONTEST_GUIDE.md) - 如何舉辦競賽
- [學生使用指南](./STUDENT_GUIDE.md) - 了解學生視角
- [後端 API 文件](../BACKEND_API.md) - 系統技術規格

---

## 📋 題目設計檢查清單

創建題目前請檢查：

### 基本資訊
- [ ] 題目標題清楚明確
- [ ] 難度等級設定合理
- [ ] 標籤/類別正確
- [ ] 時間和記憶體限制合理

### 題目描述
- [ ] 問題陳述清楚無歧義
- [ ] 輸入格式說明詳細
- [ ] 輸出格式說明詳細
- [ ] 限制條件明確列出
- [ ] 至少 2 個範例測試
- [ ] 範例包含解釋說明

### 測試資料
- [ ] 至少 2 個範例測試（可見）
- [ ] 至少 10 個隱藏測試
- [ ] 包含基本測試
- [ ] 包含邊界測試
- [ ] 包含隨機測試
- [ ] 包含特殊情況測試
- [ ] 測試資料總分為 100
- [ ] 輸入輸出格式正確

### 驗證
- [ ] 標準解通過所有測試
- [ ] 多種語言都能通過
- [ ] 錯誤解在特定測試點失敗
- [ ] 時間限制適當（標準解通過）
- [ ] 請同事審查題目

---

祝您創建出優質的題目！ 🎯

**更新日期**: 2025-12-03  
**文件版本**: 1.0.0
