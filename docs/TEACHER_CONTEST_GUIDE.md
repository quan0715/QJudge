# QJudge 教師競賽管理指南

本指南提供教師使用 QJudge 平台舉辦和管理競賽的完整說明，包括競賽創建、配置、監控和結果分析等操作。

---

## 📋 目錄

- [快速開始](#快速開始)
- [創建競賽](#創建競賽)
- [配置競賽](#配置競賽)
- [管理競賽題目](#管理競賽題目)
- [競賽前準備](#競賽前準備)
- [競賽進行中](#競賽進行中)
- [競賽結束後](#競賽結束後)
- [常見問題](#常見問題)

---

## 🚀 快速開始

### 教師權限

要舉辦競賽，您需要具備教師權限。如果您尚未獲得權限，請聯絡系統管理員。

### 存取競賽管理

1. 登入 QJudge 平台
2. 點擊導覽列的「競賽管理」或「我的競賽」
3. 進入競賽管理頁面

---

## 🎯 創建競賽

### 步驟 1: 進入創建頁面

1. 在競賽管理頁面，點擊「創建新競賽」按鈕
2. 進入競賽創建表單

### 步驟 2: 填寫基本資訊

#### 競賽標題
- **中文標題**: 例如「資料結構期中考試」、「演算法競賽第一回」
- **英文標題**（可選）: 提供英文名稱方便國際學生

#### 競賽描述
使用 Markdown 格式撰寫，包含：
- 競賽目的和背景
- 考試範圍或主題
- 特別說明事項
- 聯絡方式

範例：
```markdown
# 資料結構期中考試

## 考試範圍
- 陣列與鏈結串列
- 堆疊與佇列
- 樹狀結構（二元樹、二元搜尋樹）
- 排序演算法

## 注意事項
- 考試期間禁止使用網路搜尋
- 可以使用標準函式庫
- 每題有提交次數限制

## 聯絡方式
如有問題請透過公告系統提問。
```

### 步驟 3: 設定時間

#### 開始時間
- 選擇競賽開始的日期和時間
- 建議設定在上課時間或固定時段
- 確保時區正確（系統預設使用 Asia/Taipei）

#### 結束時間
- 選擇競賽結束的日期和時間
- 計算競賽時長（如 2 小時、3 小時）
- 考慮學生可能需要的緩衝時間

範例時間設定：
```
開始時間: 2025-12-15 14:00
結束時間: 2025-12-15 17:00
時長: 3 小時
```

### 步驟 4: 設定存取控制

#### 公開性設定

**公開競賽**：
- 所有人都可以看到競賽
- 任何人都可以註冊參加
- 適合公開的練習賽

**私人競賽**：
- 只有獲得連結的人可以看到
- 需要知道競賽 ID 才能存取
- 適合正式考試

#### 密碼保護

設定競賽密碼：
- 勾選「需要密碼」
- 輸入競賽密碼（建議 6-12 位）
- 在考試開始前將密碼告知學生
- 可以設定簡單好記的密碼如 `DS2025`

範例：
```
競賽類型: 私人競賽
需要密碼: 是
競賽密碼: DataStruct2025
```

### 步驟 5: 競賽規則設定

#### 計分規則

**ACM/ICPC 規則**：
- 以解題數量為主要指標
- 解題數相同時比較總罰時
- 每次錯誤提交增加罰時（通常 20 分鐘）
- 適合程式競賽

**OI 規則**：
- 以總分為主要指標
- 可以部分通過獲得部分分數
- 只計算每題的最高分
- 適合考試和作業

**IOI 規則**：
- 類似 OI 規則
- 但計算所有提交的分數總和
- 適合練習賽

範例：
```
計分規則: OI 規則
原因: 期中考試，允許學生多次提交改進
```

#### 提交限制

**提交次數限制**：
- 設定每題的最大提交次數
- 建議值：5-10 次
- 設定 0 表示不限制

**提交冷卻時間**：
- 設定兩次提交之間的最短間隔（秒）
- 防止學生暴力嘗試
- 建議值：30-60 秒

範例：
```
每題最大提交次數: 10 次
提交冷卻時間: 60 秒
```

#### 其他規則

**排行榜凍結**：
- 在競賽最後 N 分鐘凍結排名
- 增加競賽懸念
- 適合競賽，不適合考試

**允許查看他人程式碼**：
- 競賽結束後是否允許查看他人提交
- 考試通常不允許
- 練習賽可以允許以促進學習

---

## ⚙️ 配置競賽

### 進階設定

#### IP 白名單（可選）
限制只有特定 IP 可以參加：
```
140.113.0.0/16  # NYCU 校園網路
```

#### 語言限制
選擇本次競賽允許使用的程式語言：
- ✅ C++17
- ✅ Python 3.11
- ✅ Java 17
- ⬜ JavaScript

#### 公告功能
啟用公告系統以便：
- 發布競賽相關通知
- 回答學生疑問
- 更正題目錯誤

### 競賽風格設定

#### 題目顯示方式

**方式 A**: 顯示題目難度標籤
- 學生可以看到題目難度（簡單/中等/困難）
- 幫助學生選擇適合的題目順序

**方式 B**: 隱藏題目難度
- 不顯示難度標籤
- 增加挑戰性
- 適合正式競賽

#### 測試資料可見性

**完全可見**：
- 學生可以看到所有測試資料
- 適合教學和練習

**僅顯示範例**：
- 只顯示範例測試
- 隱藏評測用的測試資料
- 適合考試

---

## 📝 管理競賽題目

### 新增題目到競賽

#### 方式 1: 從題庫選擇

1. 在競賽編輯頁面，點擊「新增題目」
2. 從題庫中選擇要加入的題目
3. 可以多選批量新增
4. 設定題目順序和分數

#### 方式 2: 創建新題目

1. 點擊「創建新題目並加入競賽」
2. 填寫題目資訊（請參考 [題目管理指南](./TEACHER_PROBLEM_GUIDE.md)）
3. 題目會自動加入當前競賽

### 設定題目順序

題目順序影響學生看到的順序：

1. 使用拖曳功能調整順序
2. 或手動輸入順序編號
3. 建議按難度由易到難排列

範例順序：
```
1. A+B Problem (簡單)
2. 最大公因數 (簡單)
3. 二元搜尋 (中等)
4. 最短路徑 (困難)
```

### 設定題目分數

每題可以設定不同的分數權重：

**均等分配**：
- 每題 100 分
- 適合題目難度相近的情況

**按難度分配**：
- 簡單題 50-70 分
- 中等題 80-100 分
- 困難題 120-150 分

**總分制**：
- 設定總分為固定值（如 500 分）
- 按題目重要性分配

### 隱藏/顯示題目

可以設定題目在競賽中的可見性：
- **立即顯示**: 競賽開始即可見
- **延遲顯示**: 競賽進行到特定時間後顯示
- **隱藏**: 暫時不顯示給學生

### 題目權重調整

在競賽進行中發現問題時，可以：
- 調整題目分數
- 標記題目為「額外題」（不計入總分）
- 移除有問題的題目

---

## 📅 競賽前準備

### 檢查清單

#### 1 週前
- ✅ 完成競賽創建和基本配置
- ✅ 選擇並測試所有題目
- ✅ 撰寫競賽說明和規則
- ✅ 確認競賽時間無誤

#### 3 天前
- ✅ 檢查所有題目的測試資料
- ✅ 測試評測系統是否正常
- ✅ 準備競賽密碼
- ✅ 通知學生競賽資訊

#### 1 天前
- ✅ 最後確認題目內容
- ✅ 檢查系統負載能力
- ✅ 準備競賽期間的答疑時間
- ✅ 確認備用方案

#### 競賽當天
- ✅ 提前 30 分鐘登入檢查
- ✅ 確認所有設定正確
- ✅ 公布競賽密碼（如有）
- ✅ 發布歡迎公告

### 通知學生

建議提供以下資訊：
```
主旨：資料結構期中考試通知

各位同學好，

期中考試將於 12/15 (五) 14:00-17:00 舉行。

競賽資訊：
- 平台：QJudge (nycu-coding-lab.quan.wtf)
- 時間：12/15 14:00-17:00 (3小時)
- 題目數量：5 題
- 計分方式：OI 規則，部分通過可得部分分數
- 程式語言：C++、Python、Java
- 競賽密碼：DataStruct2025 (考試開始前公布)

注意事項：
1. 請提前登入檢查帳號
2. 準備穩定的網路環境
3. 考試期間禁止使用網路搜尋
4. 每題限制提交 10 次

如有問題請透過公告系統提問。

祝考試順利！
```

### 測試競賽

在正式開始前，建議：

1. **創建測試競賽**：
   - 使用相同的設定
   - 邀請助教參與測試
   - 確認所有功能正常

2. **測試項目**：
   - 登入和密碼驗證
   - 題目顯示正確
   - 提交和評測正常
   - 排名更新即時
   - 公告系統運作

3. **壓力測試**：
   - 模擬多人同時提交
   - 確認系統負載能力
   - 檢查評測速度

---

## 🎮 競賽進行中

### 監控控制台

競賽開始後，在管理頁面可以看到：

#### 即時統計
- 當前參賽人數
- 總提交數
- 各題通過率
- 系統負載狀況

#### 學生列表
- 查看所有參賽學生
- 學生的解題進度
- 最後提交時間
- 異常狀況標記

### 發布公告

#### 發布系統公告

1. 點擊「發布公告」按鈕
2. 選擇公告類型：
   - 📢 **一般公告**: 普通通知
   - ⚠️ **重要公告**: 重要訊息（會突出顯示）
   - ❗ **緊急公告**: 緊急通知（全螢幕彈窗）

3. 撰寫公告內容

範例公告：
```
【重要】題目 C 的範例測試 #2 有誤

原範例輸出應為 "42" 而非 "24"
請各位同學注意，評測系統已更新正確答案。
已提交的同學可以選擇重新提交。
```

#### 回答學生提問

學生可以透過公告系統提問：

1. 查看學生提問列表
2. 選擇是否公開回答
3. 撰寫回答並發布

**回答原則**：
- 不能洩漏解題思路
- 可以確認題目資訊
- 可以解釋題目意思
- 不能告知正確答案

### 監控提交狀況

#### 查看即時提交

在提交監控頁面可以看到：
- 所有學生的即時提交
- 評測狀態和結果
- 提交的程式碼（可選）

#### 異常偵測

系統會自動標記異常狀況：
- 🔴 **大量提交**: 短時間內多次提交
- 🟡 **長時間未提交**: 進入競賽但沒有提交
- 🟠 **相似程式碼**: 疑似抄襲（如啟用）

### 查看排名

即時排名頁面顯示：
- 當前排名
- 各學生解題數和分數
- 最後提交時間
- 罰時（如適用）

可以：
- 匯出排名資料（CSV/Excel）
- 凍結排名顯示
- 查看排名變化圖

### 緊急操作

#### 暫停競賽

如遇緊急狀況（系統問題、題目錯誤）：

1. 點擊「暫停競賽」
2. 所有學生的計時暫停
3. 可以禁止新提交
4. 發布公告說明原因

#### 延長時間

如需延長競賽時間：

1. 進入競賽設定
2. 修改結束時間
3. 系統會自動通知所有參賽者

#### 重新評測

如發現測試資料錯誤：

1. 修正測試資料
2. 選擇「重新評測所有提交」
3. 系統會重新評測該題的所有提交
4. 排名會自動更新

---

## 📊 競賽結束後

### 結果統計

#### 匯出結果

可以匯出以下資料：

1. **排名表**：
   - 最終排名
   - 各題得分
   - 總分和罰時
   - 格式：CSV、Excel、PDF

2. **提交記錄**：
   - 所有學生的提交記錄
   - 包含程式碼（可選）
   - 評測結果詳情

3. **統計報表**：
   - 各題通過率
   - 平均分數
   - 時間分佈圖
   - 提交次數分析

#### 查看詳細統計

**整體統計**：
- 參賽人數
- 平均分數
- 最高分、最低分
- 標準差

**題目統計**：
- 各題通過率
- 平均提交次數
- 常見錯誤類型
- 平均解題時間

**學生統計**：
- 個別學生表現
- 解題順序分析
- 時間分配分析

### 分數調整

如有需要，可以手動調整分數：

1. 進入分數管理頁面
2. 選擇要調整的學生和題目
3. 輸入調整後的分數
4. 填寫調整原因（記錄用）

### 公布結果

#### 結果公開設定

選擇公開的內容：
- ✅ 最終排名
- ✅ 各題通過率
- ⬜ 學生程式碼（需謹慎考慮）
- ⬜ 題目解答

#### 發布題解

競賽結束後可以發布題解：

1. 創建題解文件
2. 包含解題思路和參考程式碼
3. 公布在競賽頁面
4. 供學生學習參考

### 回饋分析

#### 收集學生回饋

可以創建問卷收集：
- 題目難度是否適中
- 時間是否充足
- 系統運作是否順暢
- 改進建議

#### 自我檢討

競賽結束後檢討：
- 題目設計是否合理
- 時間配置是否適當
- 有無需要改進的地方
- 為下次競賽做準備

---

## 💡 最佳實踐

### 競賽設計原則

#### 1. 題目選擇
- **由易到難**: 至少包含 1-2 題簡單題讓學生建立信心
- **範圍明確**: 題目範圍符合教學進度
- **難度適中**: 考慮學生程度，不要太難或太簡單
- **測試完整**: 確保測試資料覆蓋所有情況

#### 2. 時間安排
- **充足時間**: 給予足夠的解題時間
- **避免高峰**: 避開系統負載高峰時段
- **考慮時差**: 如有遠距學生，考慮時差問題

#### 3. 規則設定
- **規則清楚**: 明確說明計分規則和限制
- **公平公正**: 確保所有學生在相同條件下競爭
- **彈性處理**: 保留調整空間應對特殊狀況

### 常見情境處理

#### 情境 1: 題目有誤

**處理步驟**：
1. 立即發布公告說明
2. 暫停競賽或該題提交
3. 修正題目或測試資料
4. 重新評測相關提交
5. 考慮該題是否計分

#### 情境 2: 系統故障

**處理步驟**：
1. 暫停競賽
2. 發布公告安撫學生
3. 聯絡技術支援
4. 修復後延長相應時間
5. 考慮補償措施

#### 情境 3: 學生申訴

**處理原則**：
- 認真對待每個申訴
- 檢查相關提交記錄
- 查看評測詳情
- 公正處理，有理有據
- 記錄處理過程

#### 情境 4: 疑似作弊

**處理步驟**：
1. 收集相關證據
2. 比對程式碼
3. 與學生面談
4. 依校規處理
5. 加強防作弊機制

---

## ❓ 常見問題

### 競賽設定相關

**Q: 競賽創建後還能修改嗎？**  
A: 競賽開始前可以修改任何設定。競賽進行中只能修改部分設定（如延長時間、調整分數）。

**Q: 可以複製之前的競賽設定嗎？**  
A: 可以。在競賽列表中點擊「複製」，系統會創建相同設定的新競賽。

**Q: 如何設定不同班級使用不同密碼？**  
A: 需要創建多個競賽，每個設定不同密碼。或使用 IP 白名單區分。

### 題目管理相關

**Q: 可以在競賽進行中新增題目嗎？**  
A: 可以，但不建議。如必須新增，請確保公平性（如延長時間、調整分數）。

**Q: 如何確保題目測試資料正確？**  
A: 建議先在測試競賽中驗證，或請助教幫忙檢查。

**Q: 能否使用別人的題目？**  
A: 可以從公開題庫選擇題目，但請注意版權問題。

### 評測相關

**Q: 為什麼有些學生的提交一直顯示 Pending？**  
A: 可能是評測系統負載過高。檢查評測 Worker 狀態，必要時增加 Worker 數量。

**Q: 可以查看學生的程式碼嗎？**  
A: 可以。教師有權限查看所有學生的提交程式碼。

**Q: 如何處理特殊情況的加分？**  
A: 使用分數調整功能，記得填寫調整原因以備查。

### 統計分析相關

**Q: 如何匯出成績給教務系統？**  
A: 匯出為 Excel 格式，包含學號、姓名、成績等欄位，可直接匯入教務系統。

**Q: 可以看到學生的解題過程嗎？**  
A: 可以查看學生的所有提交記錄，按時間排序，了解解題過程。

**Q: 如何分析題目難度是否適當？**  
A: 查看通過率、平均提交次數、解題時間等指標。通過率 20%-80% 通常較為適中。

---

## 📞 需要協助？

如果遇到問題：

1. **查看文件**: 詳閱本指南和相關文件
2. **技術支援**: 聯絡系統管理員
3. **回報問題**: 在 [GitHub Issues](https://github.com/quan0715/QJudge/issues) 回報系統問題
4. **教師社群**: 加入教師群組交流經驗

---

## 📚 相關文件

- [題目管理指南](./TEACHER_PROBLEM_GUIDE.md) - 如何創建和管理題目
- [學生使用指南](./STUDENT_GUIDE.md) - 了解學生使用流程
- [執行與部署指南](./RUN_AND_DEPLOY.md) - 系統部署和維護
- [後端 API 文件](../BACKEND_API.md) - API 技術規格

---

祝您的競賽舉辦成功！ 🎉

**更新日期**: 2025-12-03  
**文件版本**: 1.0.0
